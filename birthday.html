<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Birthday Paradox Computations &#8212; toycrypto 0.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css?v=279e0f84" />
    <link rel="stylesheet" type="text/css" href="_static/css/sphinx-toolbox.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx_toolbox_installation.css" />
    <script src="_static/documentation_options.js?v=6c02275b"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=5572e0a9"></script>
    <script src="_static/sphinx_toolbox_installation.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Types" href="types.html" />
    <link rel="prev" title="Security games" href="games.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="types.html" title="Types"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="games.html" title="Security games"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">toycrypto 0.4.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Birthday Paradox Computations</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Nothing here should be used for any security purposes.</p>
<ul class="simple">
<li><p>If you need cryptographic tools in a Python environment use <a class="reference external" href="https://cryptography.io/en/latest/">pyca</a>.</p></li>
<li><p>If you need efficient and reliable abstract math utilities in a Python-like environment consider using <a class="reference external" href="https://www.sagemath.org">SageMath</a>.</p></li>
</ul>
</div>
<section id="birthday-paradox-computations">
<h1>Birthday Paradox Computations<a class="headerlink" href="#birthday-paradox-computations" title="Link to this heading">¶</a></h1>
<p>This module is imported with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">toy_crypto.birthday</span>
</pre></div>
</div>
<p>The classic <a class="reference external" href="https://en.wikipedia.org/wiki/Birthday_problem">Birthday problem</a> example is
to estimate the number of individuals
(whose birthdays are uniformly distributed among 365 days of the year)
for there to be at least a 0.5 probability of there being at least one pair of individuals who share the same birthday.</p>
<p>The function that returns a propbably is named <a class="reference internal" href="#toy_crypto.birthday.P" title="toy_crypto.birthday.P"><code class="xref py py-func docutils literal notranslate"><span class="pre">P()</span></code></a>,
and the one that returns a quantile is named <a class="reference internal" href="#toy_crypto.birthday.Q" title="toy_crypto.birthday.Q"><code class="xref py py-func docutils literal notranslate"><span class="pre">Q()</span></code></a>.
This follows the R conventions
[<span id="id1"><a class="reference internal" href="bibliography.html#id4" title="R Core Team. R: A Language and Environment for Statistical Computing. R Foundation for Statistical Computing, Vienna, Austria, 2024. URL: https://www.R-project.org/.">RCTeam24</a></span>]
as reflected in R’s <code class="docutils literal notranslate"><span class="pre">qbirthday</span></code> and <code class="docutils literal notranslate"><span class="pre">pbirthday</span></code> functions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">toy_crypto</span><span class="w"> </span><span class="kn">import</span> <span class="n">birthday</span>

<span class="n">computed_n</span> <span class="o">=</span> <span class="n">birthday</span><span class="o">.</span><span class="n">Q</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">367</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">computed_n</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>23
</pre></div>
</div>
<p>Birthday computations are useful for computing collision probabilites.
Suppose you had a hash function (truncated to ) returning 32 bit hashes
and you wished to know the probability of a collision if you hashed ten thousand items.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">toy_crypto</span><span class="w"> </span><span class="kn">import</span> <span class="n">birthday</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">isclose</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">10_000</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">32</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">birthday</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">isclose</span><span class="p">(</span><span class="n">p</span><span class="p">,</span>  <span class="mf">0.011574013876</span><span class="p">)</span>
</pre></div>
</div>
<section id="module-toy_crypto.birthday">
<span id="the-birthday-functions"></span><h2>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">birthday</span></code> functions<a class="headerlink" href="#module-toy_crypto.birthday" title="Link to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="toy_crypto.birthday.EXACT_THRESHOLD">
<span class="sig-prename descclassname"><span class="pre">toy_crypto.birthday.</span></span><span class="sig-name descname"><span class="pre">EXACT_THRESHOLD</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#toy_crypto.birthday.EXACT_THRESHOLD" title="Link to this definition">¶</a></dt>
<dd><p>With auto mode, the threshold for using exact or approximate modes.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="toy_crypto.birthday.MAX_QBIRTHDAY_P">
<span class="sig-prename descclassname"><span class="pre">toy_crypto.birthday.</span></span><span class="sig-name descname"><span class="pre">MAX_QBIRTHDAY_P</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.99999999</span></em><a class="headerlink" href="#toy_crypto.birthday.MAX_QBIRTHDAY_P" title="Link to this definition">¶</a></dt>
<dd><p>Maximum probability that Q can handle.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="toy_crypto.birthday.P">
<span class="sig-prename descclassname"><span class="pre">toy_crypto.birthday.</span></span><span class="sig-name descname"><span class="pre">P</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">classes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">365</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coincident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="types.html#toy_crypto.types.Prob" title="toy_crypto.types.Prob"><span class="pre">Prob</span></a></span></span><a class="reference internal" href="_modules/toy_crypto/birthday.html#P"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#toy_crypto.birthday.P" title="Link to this definition">¶</a></dt>
<dd><p>probability of at least 1 collision among n individuals for c classes”.</p>
<p>The “exact” method still involves floating point approximations
and may be very slow for large n.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – if any of <code class="xref py py-data docutils literal notranslate"><span class="pre">n</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">classes</span></code>,
or <code class="xref py py-data docutils literal notranslate"><span class="pre">coincident</span></code> are less than 1.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>n</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>)</p></li>
<li><p><strong>classes</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class="pre">365</span></code>)</p></li>
<li><p><strong>coincident</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><strong>mode</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></span>, default: <code class="docutils literal notranslate"><span class="pre">'auto'</span></code>)</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NewType" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">NewType</span></code></a>(<code class="docutils literal notranslate"><span class="pre">Prob</span></code>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>)</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="toy_crypto.birthday.Q">
<span class="sig-prename descclassname"><span class="pre">toy_crypto.birthday.</span></span><span class="sig-name descname"><span class="pre">Q</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prob</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">classes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">365</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coincident</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span></span><a class="reference internal" href="_modules/toy_crypto/birthday.html#Q"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#toy_crypto.birthday.Q" title="Link to this definition">¶</a></dt>
<dd><p>Returns minimum number n to get a probability of p for c classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – if <code class="xref py py-data docutils literal notranslate"><span class="pre">prob</span></code> is less than 0 or greater than 1.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – if <code class="xref py py-data docutils literal notranslate"><span class="pre">classes</span></code> is less than 1.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><strong>ValueError</strong></a> – if <code class="xref py py-data docutils literal notranslate"><span class="pre">coincident</span></code> is less than 1.</p></li>
</ul>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>prob</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></span>, default: <code class="docutils literal notranslate"><span class="pre">0.5</span></code>)</p></li>
<li><p><strong>classes</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class="pre">365</span></code>)</p></li>
<li><p><strong>coincident</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span>, default: <code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="implementation-ported-from-r">
<h2>Implementation ported from R<a class="headerlink" href="#implementation-ported-from-r" title="Link to this heading">¶</a></h2>
<p>It was not a simple matter for me to find or construct an algorithm that
produces reasonable approximations in a reasonably efficient way for the
ranges of numbers I wished to consider.
Eventually I found the solution used by <span id="id2">R Core Team [<a class="reference internal" href="bibliography.html#id4" title="R Core Team. R: A Language and Environment for Statistical Computing. R Foundation for Statistical Computing, Vienna, Austria, 2024. URL: https://www.R-project.org/.">2024</a>]</span>
in <a class="reference external" href="https://github.com/wch/r-source/blob/trunk/src/library/stats/R/birthday.R">R’s birthday.R source</a>, which credits <span id="id3">Diaconis and Mosteller [<a class="reference internal" href="bibliography.html#id5" title="Persi Diaconis and Frederick Mosteller. Methods for studying coincidences. Journal of the American Statistical Association: Applications &amp; Case Studies, December 1989. doi:10.1080/01621459.1989.10478847.">1989</a>]</span>.</p>
<p>My port of that implementation to Python only changes the conditions underwhich
the approximate method is used along with some internal variable naming and commenting to help me better understand the algorithm and its implementation.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Birthday Paradox Computations</a><ul>
<li><a class="reference internal" href="#module-toy_crypto.birthday">The <code class="xref py py-mod docutils literal notranslate"><span class="pre">birthday</span></code> functions</a><ul>
<li><a class="reference internal" href="#toy_crypto.birthday.EXACT_THRESHOLD"><code class="docutils literal notranslate"><span class="pre">EXACT_THRESHOLD</span></code></a></li>
<li><a class="reference internal" href="#toy_crypto.birthday.MAX_QBIRTHDAY_P"><code class="docutils literal notranslate"><span class="pre">MAX_QBIRTHDAY_P</span></code></a></li>
<li><a class="reference internal" href="#toy_crypto.birthday.P"><code class="docutils literal notranslate"><span class="pre">P()</span></code></a></li>
<li><a class="reference internal" href="#toy_crypto.birthday.Q"><code class="docutils literal notranslate"><span class="pre">Q()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#implementation-ported-from-r">Implementation ported from R</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="games.html"
                          title="previous chapter">Security games</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="types.html"
                          title="next chapter">Types</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/birthday.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="types.html" title="Types"
             >next</a> |</li>
        <li class="right" >
          <a href="games.html" title="Security games"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">toycrypto 0.4.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Birthday Paradox Computations</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2024–2025 Jeffrey Goldberg.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.3.0+/e4b5fc5.
    </div>
  </body>
</html>